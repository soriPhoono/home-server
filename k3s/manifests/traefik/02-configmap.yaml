---
apiVersion: v1
kind: ConfigMap
metadata:
  name: traefik-config
  namespace: traefik
data:
  traefik.yaml: |
    # Global configuration
    global:
      checkNewVersion: true
      sendAnonymousUsage: false

    # Entry points configuration
    entryPoints:
      web:
        address: :80
        http:
          redirections:
            entryPoint:
              to: websecure
              scheme: https
      websecure:
        address: :443
        http:
          tls: {}

    # API and Dashboard
    api:
      dashboard: true
      insecure: false

    # Providers configuration
    providers:
      kubernetesCRD:
        allowCrossNamespace: true
      kubernetesIngress:
        allowEmptyServices: true

    # Logging
    log:
      level: INFO

    # Access logs
    accessLog:
      enabled: true
